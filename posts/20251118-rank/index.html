<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.34">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="sun123zxy">
<meta name="dcterms.date" content="2025-11-18">

<title>On the Rank and the Span Rank of Modules – sun123zxy’s blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//assets/images/avatar.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-a45597b65f5f3795ae8b140358e6d8e8.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-96de23c090fa5f90e6d2871446c09927.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-1925420af0bd4350769d4d9ba097a0b5.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-13131c0cbfd767dd1b48fb0d502872d8.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script>
MathJax = {
  tex: {
    macros: {
        SunQuarTeX: String.raw`\mathrm{\mathbf S \;\!\! {\scriptstyle \mathbf U \;\!\! \mathbb N} \mathbb Q \;\!\! {\scriptstyle \mathbf U \;\!\! \;\!\! \mathbf A \;\!\! \mathbb R} \;\!\! \;\!\! \mathbf{\TeX}}`
    }
  }
};
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed quarto-dark"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = true;
    const darkModeDefault = authorPrefersDark;
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">sun123zxy’s blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../listings/overview.html"> 
<span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../listings/projects/index.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/sun123zxy/blog-quarto-code/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-rss" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-rss">    
        <li>
    <a class="dropdown-item" href="../../listings/all.xml">
 <span class="dropdown-text">All Posts</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">On the Rank and the Span Rank of Modules</h1>
  <div class="quarto-categories">
    <div class="quarto-category">math</div>
    <div class="quarto-category">algebra</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>sun123zxy </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 18, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">December 1, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<p>We work over a commutative ring <span class="math inline">\(R\)</span> with unity. The rank <span class="math inline">\(\operatorname{rank}_R M\)</span> of a module <span class="math inline">\(R\)</span>-module <span class="math inline">\(M\)</span> is defined as the maximal cardinality of a <span class="math inline">\(R\)</span>-linearly independent subset of <span class="math inline">\(M\)</span>. A homologist might write this as an exact sequence <span class="math display">\[
0 \longrightarrow R^{\oplus n} \longrightarrow M
\]</span> where <span class="math inline">\(n\)</span> is as large as possible.</p>
<p>It’s also tempting to define the rank in other ways. For example, if <span class="math inline">\(R\)</span> is an integral domain with field of fractions <span class="math inline">\(k\)</span>, one might define the rank of an <span class="math inline">\(R\)</span>-module <span class="math inline">\(M\)</span> as the dimension of the <span class="math inline">\(k\)</span>-vector space <span class="math inline">\(k \otimes_R M\)</span>. Are these two definitions equivalent?</p>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="prp-rank-eq-fraction-dim" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 1</strong></span> Let <span class="math inline">\(R\)</span> be an integral domain with field of fractions <span class="math inline">\(k\)</span>. For any <span class="math inline">\(R\)</span>-module <span class="math inline">\(M\)</span>, <span class="math inline">\(\operatorname{rank}_R M = \dim_k (k \otimes_R M)\)</span>.</p>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Proof
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="proof">
<p><span class="proof-title"><em>Proof</em>. </span>To see this, consider the following commutative diagram, where downward arrows are given by tensoring with <span class="math inline">\(k\)</span>:</p>
<div id="fig-rank-fraction" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rank-fraction-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="tikz">
<!--?xml version='1.0' encoding='UTF-8'?-->
<!-- This file was generated by dvisvgm 3.4.3 -->
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="143.01pt" height="74.835pt" viewbox="0 0 95.34 49.89">
<style type="text/css">
@font-face{font-family:XDTRFF-CMSY10;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAAJQAAoAAAAABCQAAAIFAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAANAqBUIFQCwYAATYCJAMIBCAFgmgHIBttA2COw7jhK7Es0cpVeRHx8M/h7773x5rt42Xb4HPTA0wXcSIZZGv+19WfXaejNVz5qNeZoAS7uQ3SOSlEHZyLDxc40MK1+MyzfSAFOrCiGSbGJ9DrAz3p63SbTjxFusxGUEfR0QMK+QL1gRL5wXr4M9cbYXw7w2kIUZQhbgDW7qlFD3j7rzW27Y8P4F8sMAgA/v8BJAoYYgsMcWwBRUXB/uv/v7QfK+hOAoo/VsI5YAeAIqA0bvArzTsSHjInYRr1pVEG82MwChm2oGoQjKbdyWzza3McQ0l4ktLDCINN0zgKU5QXk2d1ZzXy9p8dsHT1WIp0szpYUrgblrA6+8xWg65cBh+f4S57+PaWpJJjWu2uJOzahSS+2SfVJoolUBvkcfvXQmYTJRLQ1va/Te25GwspyJb0L4L4HgAEguOvnw+5Ufy3gF2kb/2v5HsiAKhKECytfClaTL4LnCyVhRDSOe5A0KLuGQToqAlZ1NIhSxqWZFnLyX7dXDi2KNaEtUIhi+aqyJKxTrJsbrSsO7N/aKt/cm3j6XBpZmZAWkEZERJ8GR6HBAYXGk+cn9G0lDe26KudwwLDA8NAmlrV6jRrotXAWYFaGlzfGrh0sFKZMgVIU6AMIUQwlFaDRuVq1XAWIlAwAbKcGpKjnAo010GlnTONFuUatdCr5ixMoHCBwrABNgIAAA==) format('woff2');}
@font-face{font-family:NQUDBD-CMMI7;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAAM4AAoAAAAABWwAAALvAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAAPAqEEIMuCwgAATYCJAMMBCAFgmIHIBtRBECOxHR7g2yThONNVzptT3IUJLADxA4RO4TYAf/03yFUb57P3bt/zUMMtWXSEmzkJvcor3kfwK79O/+gLaEwg/CDJhZw1CK1dJupQU+EEOFmT0d0dALwnKN2YADYw27/82kbJvrUWaBbzAAYAXAEXgXUkxsHBC+pDXQAOIRapNMBAGAAcAB8lTcuiRIAIkawHCJW1gl9lU7LggKOEPUyADzEINJtADBounokBbA2+R++Q29OCjc+LFO0wG3j+WE+8LlQPq+4+yw5KNjdDeVqNL4lytWbTIW/5CCqePJjCRCidfPr7wrRaAJ+PpTGgVn+60XRcNHeHgEFlqmRWX7211fflxd/f0lGZ0Bh6kysD/ufEejpeac6ePruVXr1nf3uq++QFt+a0NAQDMk3PesOsvJ396v1KR1RGu8kKgRFR/3fyQ5uGFy9nA0J+fj00aamZkRmsqyJ6lQbLTVJD2nMtlP/EwVZw/KWqhOnQT8LN4uPJZ/SoBbIfK5vY0E4V7997r+f4wH6omyc5Doym/y2NTRZYgZEzPdIWYzzj1UNbgM/ODmIs/Zz4zpJfaLmWyXHeyTwYJqOGvyRDWZbQ4XipbJyuuzHxf9R6kFymZzYPu7JwWvFXhltg8jK1Ag/k+/rvuqYg7gpv8rBWTu39LrUihg3d4cnkTbDoP6sVMrEpnL6nt+a34aLW2eiwsl0+SFZLJvXndzqumYJAAAACAAC4x89xMM5zX4z4STwefoHPAY7AgAmGJ58gjr4Bi1s8SkgoC4eIRzzDFoFLpQ/4DWLUkgBTnlFkbDhpBiwEqUIbBSWWYjQgUODGRAJLoUiEZJIMRBQSRGE9DUs9KzdT+Tvx2bdPH0pNhR1squro+G1f6StoRXoveVeQ81NyMqNS5HS1dDT0AWyNCnS5cgWI5MUV2mociSVG0++KGxQqCNztdKRIb/2tCwJ0qSSok2DFh6wV1I5SuQ+ADWKUjBzqXIlyPrwOCmk6NKgR4MunAM=) format('woff2');}
@font-face{font-family:OYFEXR-CMSY7;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAAJAAAoAAAAABAgAAAH1AAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAANAqBOIE5CwYAATYCJAMIBCAFgmIHIBtQAwCOwnEv2jKY3Dyi7BGSzPLAc7l/Y3KLDzTKEgkssLDn0doIvSgam/iMGmt7d6hYezFH1JpaJIqWztBeSkG0MQzdjM/DCbKwLZ75WWODjwkacBR5uvb/AyX8Zm9fjKXbdHv8RFCNoAiirxui8EL24Q/hiT7/x2HPbPKChW5QgCoFtA+c4Wi6BwHVSYll/9UAHmFXEABAXYMQRKCBIeT4yQKxkEC1vZD5fxCE+8YQEIMEdMEAQAwg6QRlaTp2ay+L3Fqv/rrEq/cZbkp9Bo/uqtgzGM5u2uM4dwcNf+gTvFYWdtd5esLo0+CrqwabGrriO7oMu3SPdhnUccYuuk/z2B7d5Twtc3kboTrDH1FZXM88nv+00vKm099c8HmBa0ar0fzd4/M3Q41mkxWAAARw/i3sOSLbfoNYDB/VE8ah84AcBQSwjMolFOQRBwQhCHWICQjV8q8JMCstIwCRMKZiYSKpRKhUKhWmYLuUogZD4gKRQSqUnyT9lL8E61SAJOd5iDqPBxR+v7lTYeLzjOpyjkxjarz3NqorqkqVx8xnOqf7JqZ7hrJqK+oqasExYsioKZO6jMsiM6ITU8MUTPh4jNTKv1hGw6SRnpzQp71hWapVqFIg0IZHaa6ZQOfv0G5Olk7T+kyY1mNIlloV6lSoxQDYBQAA) format('woff2');}
@font-face{font-family:TUELZZ-CMMI10;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAAPYAAoAAAAABngAAAOOAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAARAqGCIRNCwoAATYCJAMQBCAFgmgHIBsCBQgehXGbE3KhCJXvTtt5CcF/bnsfDsZwjOIMzFmtBks1NGeyZENt5jtgmx1oI2tcRLKIrAf1I7oJ0vP6X8ISNKk0PrLN4DPQyXhmm7gmf+R5UyTrA1dsGAUUEUIDHOAwsQE309FuRCPSmbusLa+lSdK1kJ+n5OsBYuxHJoGFcKNn/ynAREojb1QHNo0HUBm08FG8Z30BsF1KEhwQCT3r/wEQQASzCDOmI1cUpIVLtBKPXdn2f4u/XiAMaeJCmz8awPNBAm3ZkKiWVCUFeutxCSWMjxWKhF1i4uhq1YxCSk+EpKdSIFlpR9BAQT4V8eP7s+L4JdyPLaeV00rEYn35DWZSBsdWlCRi16+brr6OXAs2OObrS0mSll7V7lTSmgOStdjS8zZiRYImOs2U1vhS9ssMdsV3qWrOno/MPhTPT1Sitx7vXCPXxbcf9pcCv3o17krslZLE5ZdNL1/X37oXJDu2rZq13kFosOWK64o9elevaoNSKS08fl13NkHQoFZmB+y3XdLQFAsXOe8yiF2gINEbXqYiUs1QFYv4S2aJsYDtGE24eJcNaJNsgV+P4JhnB9qOTnlypb8emLwUNhU8dzCN8YhIbBo2d+OhKxYciOLh16wK0Xz0gOoxq0M7M/pUpb3RS+pfH4xqbYOIVRvQdlVmYBH2TCbzCHRc3liNL8QO/fsqsWoMb9J/xOvCw6lxk35fexNFxyJSWSCjpBXvj22K8uLiSRePUxtn6qn0MTxlAtdG9+NqZ32RZm8pbYFfj/qxyi60E6304khfuzB5KWzUUVYt6pDatQ+6+dB0IN6MUD8bf2vQ/4rX3+ldUxKoFSVjoIxrTipwC4jl3pEB9kHyJ8e8OTEkgnuV4HKfjX1vKGys9OJ2T+gKH3Ta4TauHHJq4QWDuTccN2dyg4E1qTBdzk+9auwa+1kP0SkPACAgPA/re4a061duMsFM+PNujh4H2NUKCPue+cFETZg5IIgCypglD+RDARzK5u60wlSqD8JAh1QxTa8pyWRVsmY/Xw22GNR5IJvwoJihVEkW/Uo2zKlWp20HlfUv7XRsnF9ocrK5T1hYEGl1qayTFlbthffza3Lri2rqC8q0bCxsLWzAR4UylerUylNNS5gKubSrXKw4fkIlZ4I5H2GtQUhW4sF3rVGkQjktJAtWPiAgLPeGWROB3Gy2psKYq16Rmi9eoIwWGxZsWbDBYAAA) format('woff2');}

</style>
<g id="page1">
<text font-family="TUELZZ-CMMI10" font-size="9.96" x="-10.387288" y="-80.198065" transform="matrix(1.000261 0 0 1.000261 14.682999 91.801)">R</text>
<text font-family="OYFEXR-CMSY7" font-size="6.97" x="-2.747503" y="-83.789319" transform="matrix(1.000545 0 0 1.000545 14.682999 91.801)">⊕</text>
<text font-family="NQUDBD-CMMI7" font-size="6.97" x="3.476105" y="-83.789319" transform="matrix(1.000545 0 0 1.000545 14.682999 91.801)">n</text>
<text font-family="TUELZZ-CMMI10" font-size="9.96" x="49.222151" y="-80.198065" transform="matrix(1.000261 0 0 1.000261 18.952996 91.801)">M</text>
<text font-family="TUELZZ-CMMI10" font-size="9.96" x="-10.387288" y="-47.04172" transform="matrix(1.000261 0 0 1.000261 15.753999 91.801)">k</text>
<text font-family="OYFEXR-CMSY7" font-size="6.97" x="-4.887336" y="-50.642393" transform="matrix(1.000545 0 0 1.000545 15.753999 91.801)">⊕</text>
<text font-family="NQUDBD-CMMI7" font-size="6.97" x="1.336271" y="-50.642393" transform="matrix(1.000545 0 0 1.000545 15.753999 91.801)">n</text>
<text font-family="TUELZZ-CMMI10" font-size="9.96" x="49.222151" y="-47.04172" transform="matrix(1.000261 0 0 1.000261 6.846995 91.801)">k</text>
<text font-family="XDTRFF-CMSY10" font-size="9.96" x="56.934138" y="-47.04172" transform="matrix(1.000261 0 0 1.000261 6.846995 91.801)">⊗</text>
<text font-family="NQUDBD-CMMI7" font-size="6.97" x="64.662746" y="-45.535175" transform="matrix(1.000545 0 0 1.000545 6.846995 91.801)">R</text>
<text font-family="TUELZZ-CMMI10" font-size="9.96" x="73.428832" y="-47.04172" transform="matrix(1.000261 0 0 1.000261 6.846995 91.801)">M</text>
<path d="M28.07764 9.09074H63.29752" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10"></path>
<path d="M61.42462 6.699829C61.80319 8.134409 62.6468 8.811809 63.49675 9.090739C62.6468 9.369669 61.80319 10.047069 61.42462 11.481649" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
<path d="M13.93874 15.43057V32.56658" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10"></path>
<path d="M16.32965 30.69369C14.89507 31.07226 14.21767 31.91587 13.93874 32.76582C13.65981 31.91587 12.98241 31.07226 11.54783 30.69369" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
<path d="M73.56494 15.43057V33.5806" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10"></path>
<path d="M75.95585 31.70771C74.52127 32.08628 73.84387 32.92989 73.56494 33.77984C73.28601 32.92989 72.60861 32.08628 71.17403 31.70771" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
<path d="M27.00698 42.2561H51.19122" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10"></path>
<path d="M49.318329 39.86519C49.696899 41.29977 50.540509 41.97717 51.390459 42.2561C50.540509 42.53503 49.696899 43.21243 49.318329 44.64701" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
</g>
</svg>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-rank-fraction-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1
</figcaption>
</figure>
</div>
<p>It suffices to show that the top arrow is injective if and only if the bottom arrow is injective.</p>
<p>For the downward direction, note that <span class="math inline">\(k\)</span> is a flat <span class="math inline">\(R\)</span>-module, so tensoring with <span class="math inline">\(k\)</span> preserves injections.</p>
<p>For the upward direction, suppose the bottom arrow is injective. Consider an element <span class="math inline">\((a_i)_{i=1}^n \in R^{\oplus n}\)</span> that maps to zero in <span class="math inline">\(M\)</span>. Its image in <span class="math inline">\(k^{\oplus n}\)</span> also maps to zero in <span class="math inline">\(k \otimes_R M\)</span>. Since the bottom arrow is injective, the image in <span class="math inline">\(k^{\oplus n}\)</span> must be zero, which means each <span class="math inline">\(a_i\)</span> is zero in <span class="math inline">\(k\)</span>. Since <span class="math inline">\(R\)</span> is an integral domain, the localization <span class="math inline">\(R \to k\)</span> is injective, hence each <span class="math inline">\(a_i\)</span> is zero in <span class="math inline">\(R\)</span>, indicating that the the top arrow is injective.</p>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remark (Generalizing to localizations)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div class="proof remark">
<p><span class="proof-title"><em>Remark</em> (Generalizing to localizations). </span>Note that we have only used the flatness of <span class="math inline">\(k\)</span> and that <span class="math inline">\(R\)</span> is an integral domain. Since every localization of a ring is flat, the same proof shows that as long as <span class="math inline">\(R\)</span> is an integral domain, localzation does not change the rank of a module.</p>
<p>Indeed, <span class="math inline">\(\operatorname{rank}\)</span>, as a function over <span class="math inline">\(\operatorname{Spec}R\)</span>, is locally constant. [TODO]</p>
</div>
</div>
</div>
</div>
<p>Another possible definition of rank is the minimal number of generators of a module. We call this the span rank <span class="math inline">\(\operatorname{spanrank}_R M\)</span> of an <span class="math inline">\(R\)</span>-module <span class="math inline">\(M\)</span>. A homologist might write this as an exact sequence <span class="math display">\[
R^{\oplus m} \longrightarrow M \longrightarrow 0
\]</span> where <span class="math inline">\(m\)</span> is as small as possible.</p>
<p>Clearly, <span class="math inline">\(\operatorname{rank}\)</span> and <span class="math inline">\(\operatorname{spanrank}\)</span> are equal for free modules, since the definition of a basis requires both linear independence and spanning. For finitely generated modules over a PID, having the structure theorem in hand, the <span class="math inline">\(\operatorname{rank}\)</span> is exactly the free rank, while the <span class="math inline">\(\operatorname{spanrank}\)</span> is the number of the direct summands in the decomposition. We see that <span class="math inline">\(\operatorname{spanrank}M \geq \operatorname{rank}M\)</span> in this case. This is in general true:</p>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="prp-rank-leq-spanrank" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 2</strong></span> For any <span class="math inline">\(R\)</span>-module <span class="math inline">\(M\)</span>, we have <span class="math inline">\(\operatorname{rank}_R M \leq \operatorname{spanrank}_R M\)</span>.</p>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Proof
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="proof">
<p><span class="proof-title"><em>Proof</em>. </span>Consider the following commutative diagram with exact rows:</p>
<div id="fig-rank-leq-spanrank" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rank-leq-spanrank-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="tikz">
<!--?xml version='1.0' encoding='UTF-8'?-->
<!-- This file was generated by dvisvgm 3.4.3 -->
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="213.015pt" height="69.225pt" viewbox="0 0 142.01 46.15">
<style type="text/css">
@font-face{font-family:NQUDBD-CMMI7;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAALwAAoAAAAABYwAAAKmAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAANAqEOINOCwgAATYCJAMMBCAFgmIHIBtpBFGU6kEO8MWBbcxsuEFo8nNxdYVHRDdCp5xVBoVBEXkSAf1+rH2CqYRGFg0Jqnjy0EkMmY43hlKuXynS7k/K5VMVleTpqTZHYYZv7/hTdXKcUIcg8CQQyThoHhQmWho3s+cAJPf8X46/3dlaeBvA9m5Q2gZfVhaFULY1K0s060W9CDVbU+XUqWJ7BLckQ66Q4p+QEuJj7L+p0ZqHs8pSIKhS6MBX2T+rycWQHChJCiQBd7AoQERCc9C9lqAfRgYhOsTmBwWTHgRaiQEgSt/4nWWLnhIOH21k6l0WVy/Cn/fnqV2jmZva2tqxdtA7OCxi7x/dt+5t56bMzWdmfn0W736/B05/+V+je+l/Teyvmy4Fmp5ZLi1hlkYGP0MW6S0x7zvneY0GXuzbLWz0v0OLR+vL2Vzy29vyZX3tqfFqnLX2L+hK5X1ocDYO3mgXxRy/FXVXmcjhiPQsATM/eXJ3rOOYGfDGx7BgbF3JMnFmxx7AwomsNF30//2m12qFHiAsL9d8bTJ6zMz74G2swekBK7ZGxu1KUuoncaZ0hFLt3ZJtCjimie3nMtD7tX9gU2Uqhy3Ja3JMCXCVqG34suuHE+iAL++Rc8cTyGgcKn1GR1v6+WeWZBZXGN3EZnHoX/Kv/bQ8lR375Yoy2lv8dYByUfJtSYFcY15QOsE1KSL4OOaF5BB2Q8B6lW4oq8NNsmp1c6lElS6pVLXRw5U6BcMLuULQS+KkrF2BVKJVh1Sq3dy00rKzJxf7x2Q7ZUotAshvZVUqjHgh2FqYnd+a+cr7mP3L/Mqa3GLHpdnl2SVQqWJlqlXJVsGRVKksuqWEjJIWAiB+ICkpoQg6zKdVyleqhKMg/gIlAD8qkYrSNYGsbob6kTZLjXyVPzxXMUch/IXyFwKPAQA=) format('woff2');}
@font-face{font-family:OYFEXR-CMMI10;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAAMcAAoAAAAABWgAAALTAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAAPAqECIMeCwgAATYCJAMMBCAFgmgHIBtHBFGUCkZK8DMhmwNX1xKi1uWy0crgxSlGpX0eD88f/s4d/zfG0MVhoIGFgeURxHH0RRKM4rGoN//XvBb+XAF2VYvEiASZbs8nvCG9DF6s5UnypSInYYRmZ0sz+8Tl+Mf2fx4T5B32rg30cdolFGawtmZlGnUJRaSZu2zJS1pp6bpGnp4efu5Q+RdfE/Ix+9/2aWlcFVSQoacwwUe5u78vDM+NVhkogfbGoGyi+G22UDvOGaa9kEE6YerSmI35KEoh0/YJLwDQPcjzjtmxHXOC+LiwlbN2wOPjxdPKU9TGfTIlGBoJpFrhkCAAtU9oc2MQgDxQ8LO9bpvPsDNNHcP4g2Pa2qTz1g4gczoe40d9fFSceoQfHNxfYGUF2v1H7sUL+cS6ofYZ6silZhsvN8ZdqMQ3bQV0RmU2fYoERbv64K5DH4ofH7ZyVrhHr4iiM+1vgn5/733ndWdoEVchrk6gWZfQTs0KkHykyYzE/N9vvHFucuipDEZfuf2yqpWNych4/747mf6gFomEI/uCp2qHG6FlgkwL5Eb4/7lWbBVytUy1zbtnVQxSP1lhx1BBqgU1xQrykpJ+EvASQi3UbWrMr16a6hXKrXQUePWi1PlpLD4xHxvqors5ie5/fQYWOqQEylAzlt2MRzld6NwKzrZgiNOsS4RPE4uQQiTRnMh8uGq8ca7VYwu5Hwo9fEmGQ1lesAXqJCVUkTQMCATfps/voWvX3/N2MyvHW8tdzEu6VGejfQXHrDEpykqIx0V2OS63IXNMu+iBqcCa6YltxZo4seRYnFpxdnrRIc0WvSCcqpLYDm3FiV1vcerQb7Loyv8qMb+Ora6HUThoEb8sU8Gv/UVB+Xjmhfua6X11uS92QFFNleE72Dm6uZo5A0oHU3lsrzYUCQ20EL5SKSVwPfBdL1YO9gCB4hwQB3s2GC0Ept2xV6eeulu5fPGFHUChNEqxGQ==) format('woff2');}
@font-face{font-family:TUELZZ-CMR10;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAAIUAAoAAAAAA/AAAAHLAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAANAqBIIEnCwYAATYCJAMGBCAFgmIHIBs8AwCO0UtPOGWKJgmndDxE9+ab2d1/l9I6dqEIB6xTgMMBayYRClA0ezWXmyJbxDyhYrg8IKuir31b1IDG1IVkdadmO57IBvR33U0CgGwSUQEnGGkeTrrAYh0Z9U0TpyhCDint24GS4s0o+Z4//ytwIzX+OSGISXhAgtzdfScLYy7WCnQUkef2DhIFy3SzbMQ+UFWBi96tv73/wAAkqEicA7cAVECurWdvSS5Jit9p1St9wQgYRvRFoRfK98F4GYK4W6PpnSfpyreHROh2laJo/czcQ3tbl+DdxiLHJ3/z5y9z7daGNi783Uyd7OoH8z32mquVzupnY0MNSK8UFw0m7qsbubyLaBJhaShunc0bdAIACAQnH6pkdF75NzFcAQDQfxPyGxhLEBQdyZmDYGEAgEg4gyGdGwLVMOm1E+ZQV9PmBJopWxhMO/UnbeIbFnVC2GXxUa0roFl1icG6QZt043kZy1ebtx6ktQQCp2qri8e9cScezg0ND5dvUp18s5MtbwhwIS4AtaqymraWtIYNVlUpiF6FB6JlERBwSs3KhYeLkNbQlFdVsYEHx60gvVWqLN6JUnFI6NuQ0pHX1JFVtkEAJ4QTGAaYAg==) format('woff2');}

</style>
<g id="page1">
<text font-family="TUELZZ-CMR10" font-size="9.96" x="5.78549" y="-80.94487" transform="matrix(1.000261 0 0 1.000261 -1.494998 91.425998)">0</text>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="48.367374" y="-80.94487" transform="matrix(1.000261 0 0 1.000261 -5.535998 91.425998)">R</text>
<text font-family="NQUDBD-CMMI7" font-size="6.97" x="55.991479" y="-84.535912" transform="matrix(1.000545 0 0 1.000545 -5.535998 91.425998)">n</text>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="93.834505" y="-80.94487" transform="matrix(1.000261 0 0 1.000261 -4.379998 91.425998)">M</text>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="48.367374" y="-48.913231" transform="matrix(1.000261 0 0 1.000261 -6.608998 91.425998)">R</text>
<text font-family="NQUDBD-CMMI7" font-size="6.97" x="55.991479" y="-52.51337" transform="matrix(1.000545 0 0 1.000545 -6.608998 91.425998)">m</text>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="93.834505" y="-48.913231" transform="matrix(1.000261 0 0 1.000261 -4.379998 91.425998)">M</text>
<text font-family="TUELZZ-CMR10" font-size="9.96" x="134.187971" y="-48.913231" transform="matrix(1.000261 0 0 1.000261 -1.494998 91.425998)">0</text>
<path d="M13.76803 7.96893H37.95403" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10"></path>
<path d="M36.081138 5.57802C36.459708 7.0126 37.303318 7.69 38.153268 7.96893C37.303318 8.24786 36.459708 8.92526 36.081138 10.35984" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
<path d="M60.40354 7.96893H84.58953" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10"></path>
<path d="M82.71664 5.57802C83.09521 7.0126 83.93882 7.69 84.78877 7.96893C83.93882 8.24786 83.09521 8.92526 82.71664 10.35984" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
<path d="M49.37803 14.30876V31.44477" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10" stroke-dasharray="2.78941 1.59395"></path>
<path d="M51.76894 29.57188C50.33436 29.95045 49.65696 30.79406 49.37803 31.64401C49.0991 30.79406 48.4217 29.95045 46.98712 29.57188" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
<path d="M94.85694 14.30876V31.84324" stroke="#000" fill="none" stroke-width="2.33075" stroke-miterlimit="10"></path>
<path d="M94.85694 14.30876V31.84324" stroke="#fff" fill="none" stroke-width="1.53377" stroke-miterlimit="10"></path>
<path d="M61.47595 40.00955H84.58953" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10"></path>
<path d="M82.71664 37.618643C83.09521 39.053223 83.93882 39.730623 84.78877 40.009553C83.93882 40.288483 83.09521 40.965883 82.71664 42.400463" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
<path d="M104.72589 40.00955H127.8395" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10"></path>
<path d="M125.96661 37.618643C126.34518 39.053223 127.18879 39.730623 128.03874 40.009553C127.18879 40.288483 126.34518 40.965883 125.96661 42.400463" stroke="#000" fill="none" stroke-width=".39848" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
</g>
</svg>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-rank-leq-spanrank-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2
</figcaption>
</figure>
</div>
<p>where <span class="math inline">\(R^n \to R^m\)</span> is constructed by the projective nature of <span class="math inline">\(R^n\)</span>. <span class="math inline">\(R^n \to M\)</span> is injective, hence so do <span class="math inline">\(R^n \to R^m \to M\)</span> and in turn <span class="math inline">\(R^n \to R^m\)</span>. Thus, we have an injection <span class="math inline">\(R^n \to R^m\)</span>. Tensoring with any residue field of <span class="math inline">\(R\)</span>, we get an injection of vector spaces over that field, which implies <span class="math inline">\(n \leq m\)</span>.</p>
</div>
</div>
</div>
</div>
<p>Regarding <a href="#prp-rank-eq-fraction-dim" class="quarto-xref">Proposition&nbsp;1</a>, one might wonder if there is an analogous result for <span class="math inline">\(\operatorname{spanrank}\)</span>. Let’s say <span class="math inline">\(\mathfrak m\)</span> is a maximal ideal of <span class="math inline">\(R\)</span> and the residue field <span class="math inline">\(k := R/\mathfrak m\)</span>. Tensoring the exact sequence <span class="math display">\[
R^{\oplus m} \longrightarrow M \longrightarrow 0
\]</span> with <span class="math inline">\(k\)</span>, we get an exact sequence <span class="math display">\[
k^{\oplus m} \longrightarrow k \otimes_R M \longrightarrow 0
\]</span></p>
<p>Above derivation of exact sequence shows that <span class="math inline">\(\operatorname{spanrank}_R M \geq \dim_k (k \otimes_R M)\)</span>. Sadly, the reversed inequality is not true in general. We shall provide some examples to illustrate this irregularity. Before that, let’s briefly discuss the geometric intuition behind this construction.</p>
<p>Consider the ring homomorphism <span class="math inline">\(A \to B\)</span>, we view <span class="math inline">\(B\)</span> as a <span class="math inline">\(A\)</span>-module via this homomorphism. Fix a maximal ideal <span class="math inline">\(\mathfrak m\)</span> of <span class="math inline">\(A\)</span> and write the residue field <span class="math inline">\(k = k(\mathfrak m) = A/\mathfrak m\)</span>, then the tensor product of <span class="math inline">\(A\)</span>-algebras <span class="math inline">\(k(\mathfrak m) \otimes_A B\)</span> corresponds to looking at the fiber of this homomorphism over the point <span class="math inline">\(\mathfrak m\)</span>: precisely speaking, <span class="math inline">\(\operatorname{Spec}\left( k(\mathfrak m) \otimes_A B \right)\)</span> is cannonically isomorphic to <span class="math inline">\((\operatorname{Spec}f)^{-1}(\mathfrak m)\)</span> <span class="citation" data-cites="AM1969"><a href="#ref-AM1969" role="doc-biblioref">[1, exercise 21]</a></span>. <span class="math inline">\(\dim_k \left( k \otimes_A B \right)\)</span> thus measures the “size” of the fiber.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-spanrank-arith-1" class="theorem example">
<p><span class="theorem-title"><strong>Example 1 (An arithmetic counterexample)</strong></span> Let <span class="math inline">\(R = \mathbb Z\)</span> and <span class="math inline">\(M = \mathbb Z/2\mathbb Z\)</span>. Then <span class="math inline">\(\operatorname{spanrank}_{\mathbb Z} M = 1\)</span> but <span class="math inline">\(\mathbb Z/2\mathbb Z \otimes_{\mathbb Z} \mathbb Z/3\mathbb Z \cong 0\)</span>.</p>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-spanrank-geo-min" class="theorem example">
<p><span class="theorem-title"><strong>Example 2 (A minimal geometric counterexample)</strong></span> Let <span class="math inline">\(R = \mathbb C[x]\)</span> and <span class="math inline">\(M = \mathbb C[x] / (x)\)</span>. Then <span class="math inline">\(\operatorname{spanrank}M = 1\)</span>. But the <span class="math inline">\(\mathbb C\)</span>-dimension of <span class="math inline">\(\mathbb C[x] / (x) \otimes_{\mathbb C[x]} \mathbb C[x] / (x - a)\)</span> is <span class="math inline">\(0\)</span> for any <span class="math inline">\(a \neq 0\)</span>.</p>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-spanrank-geo-x2-y2" class="theorem example">
<p><span class="theorem-title"><strong>Example 3 (A good projection)</strong></span> Let <span class="math inline">\(k\)</span> be an algebraically closed field and <span class="math inline">\(A = k[x]\)</span>, <span class="math inline">\(B = k[x,y] / (x^2 - y^2)\)</span>. Define an <span class="math inline">\(A\)</span>-module structure on <span class="math inline">\(B\)</span> via multiplication. As an <span class="math inline">\(A\)</span>-module, <span class="math inline">\(B\)</span> is generated by <span class="math inline">\(1\)</span>, <span class="math inline">\(y\)</span>, hence <span class="math inline">\(\operatorname{spanrank}_A B = 2\)</span>.</p>
<p>Let’s compute the fibers of <span class="math inline">\(\operatorname{Spec}\varphi\)</span> over different maximal ideals of <span class="math inline">\(A\)</span>. Pick a maximal ideal <span class="math inline">\(\mathfrak m := (x - x_0)\)</span> of <span class="math inline">\(A\)</span>, then the residue field <span class="math inline">\(k(\mathfrak m) = k[x] / (x - x_0)\)</span>. The fiber over <span class="math inline">\(\mathfrak m\)</span> corresponds to the <span class="math inline">\(A\)</span>-algebra <span class="math display">\[
k(\mathfrak m) \otimes_A B \cong k[x] / (x - x_0) \otimes_{k[x]} k[x,y] / (x^2 - y^2) \cong k[x,y] / (x^2 - y^2, x - x_0) \cong k[y] / (y^2 - x_0^2)
\]</span> In effect, we have substituted <span class="math inline">\(x\)</span> with <span class="math inline">\(x_0\)</span> in <span class="math inline">\(B\)</span>; now any <span class="math inline">\(f(x) \in k[x]\)</span> act on <span class="math inline">\(k[y] / (y^2 - x_0^2)\)</span> via scalar multiplication by <span class="math inline">\(f(x_0)\)</span>. Hence <span class="math inline">\(\dim_{k(\mathfrak m)} \left( k(\mathfrak m) \otimes_A B \right)\)</span> is <span class="math inline">\(2\)</span> constantly for all maximal ideals <span class="math inline">\(\mathfrak m\)</span> of <span class="math inline">\(A\)</span>. Geometrically, this corresponds to projecting the algebraic variety <span class="math inline">\(V(x^2 - y^2)\)</span> onto the <span class="math inline">\(x\)</span>-axis, i.e.&nbsp;<span class="math inline">\(\operatorname{Spec}\varphi : (x,y) \mapsto x\)</span>. Any fiber consist of <span class="math inline">\(2\)</span> points (counted with multiplicity).</p>
<p>If <span class="math inline">\(k\)</span> is not algebraically closed, will this still hold? Let’s try an example. If <span class="math inline">\(k = \mathbb R\)</span> and we pick <span class="math inline">\(\mathfrak m = (x^2 + 1)\)</span> with residue field <span class="math inline">\(k(\mathfrak m) = \mathbb R[x] / (x^2 + 1)\)</span>, then the fiber over <span class="math inline">\(\mathfrak m\)</span> corresponds to the <span class="math inline">\(A\)</span>-algebra <span class="math display">\[
\mathbb R[x] / (x^2 + 1) \otimes_A \mathbb R[x,y] / (x^2 - y^2) \cong \mathbb R[x,y] / (x^2 - y^2, x^2 + 1) = \mathbb R[x,y] / (x^2 + 1, y^2 + 1)
\]</span> <span class="math inline">\(1, y\)</span> form a basis of this <span class="math inline">\(k(\mathfrak m)\)</span>-algebra. Hence <span class="math inline">\(\dim_{k(\mathfrak m)} \left( k(\mathfrak m) \otimes_A B \right) = 2\)</span> still holds.</p>
<p>So its tempting to conjecture that in this example, <span class="math inline">\(\operatorname{spanrank}_A B = \dim_{k(\mathfrak m)} \left( k(\mathfrak m) \otimes_A B \right)\)</span> for any maximal ideal <span class="math inline">\(\mathfrak m\)</span> of <span class="math inline">\(A\)</span>. This is indeed true: clever readers might have already noticed that <span class="math inline">\(B\)</span> is a free <span class="math inline">\(A\)</span>-module with basis <span class="math inline">\(\{x+y, x-y\}\)</span>. As <span class="math inline">\(k\)</span>-algebra, <span class="math inline">\(k[x,y] / (x^2-y^2) \cong k[x,y] / (x-y) \times k[x,y] / (x+y)\)</span>.</p>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-spanrank-geo-xy" class="theorem example">
<p><span class="theorem-title"><strong>Example 4 (A non-flat projection with varying fiber dimensions)</strong></span> Let <span class="math inline">\(k\)</span> be a field and <span class="math inline">\(A = k[t]\)</span>, <span class="math inline">\(B = k[x,y] / (xy)\)</span>. Define an <span class="math inline">\(A\)</span>-module structure on <span class="math inline">\(B\)</span> via the homomorphism <span class="math inline">\(\varphi: A \to B\)</span>, <span class="math inline">\(t \mapsto x\)</span>. As an <span class="math inline">\(A\)</span>-module, <span class="math inline">\(B\)</span> is generated by <span class="math inline">\(1\)</span>, <span class="math inline">\(y\)</span>, <span class="math inline">\(y^2\)</span>, <span class="math inline">\(\ldots\)</span>, hence <span class="math inline">\(\operatorname{spanrank}_A B = +\infty\)</span>.</p>
<p>Let’s compute the fibers of <span class="math inline">\(\operatorname{Spec}\varphi\)</span> over different maximal ideals of <span class="math inline">\(A\)</span>. For the maximal ideal <span class="math inline">\(\mathfrak t := (t - t_0)\)</span> of <span class="math inline">\(A\)</span>, then the fiber over <span class="math inline">\(\mathfrak t\)</span> is given by <span class="math display">\[
k[t] / (t - t_0) \otimes_{k[t]} k[x,y] / (xy) \cong k[x,y] / (xy, x - t_0) \cong k[y] / (t_0 y).
\]</span> it is isomorphic to <span class="math inline">\(k\)</span> if <span class="math inline">\(t_0 \neq 0\)</span> and to <span class="math inline">\(k[y]\)</span> if <span class="math inline">\(t_0 = 0\)</span>. Geometrically, this corresponds to projecting the union of two coordinate axes <span class="math inline">\(\operatorname{Spec}B\)</span> onto the <span class="math inline">\(x\)</span>-axis, i.e.&nbsp;<span class="math inline">\(\operatorname{Spec}\varphi : (x,y) \mapsto x\)</span>. The fiber over the origin <span class="math inline">\((0,0)\)</span> is the entire <span class="math inline">\(y\)</span>-axis, while fibers over other points are singletons.</p>
<p>Note that <span class="math inline">\(B\)</span> is not a flat <span class="math inline">\(A\)</span>-module. This is because, if we pick <span class="math inline">\(\mathfrak t := (t)\)</span> an maximal ideal of <span class="math inline">\(A\)</span>, then <span class="math inline">\(y\)</span> is a <span class="math inline">\(t\)</span>-torsion element in <span class="math inline">\(B\)</span> (by <span class="math inline">\(t \cdot y = \varphi(t) y = xy = 0\)</span>). That is, <span class="math inline">\(t \otimes_{\mathfrak t} y\)</span> is a nonzero element in the kernel of the multiplication map <span class="math inline">\(\mathfrak t \otimes_A B \to B\)</span>. Geometrically, picking <span class="math inline">\(\mathfrak t = (t)\)</span> corresponds to looking at the fibers around <span class="math inline">\(t=0\)</span>. This “jumping” of fiber dimension is reflected algebraically by the non-flatness of <span class="math inline">\(B\)</span> as an <span class="math inline">\(A\)</span>-module.</p>
<div id="fig-spanrank-geo-xy" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-spanrank-geo-xy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="tikz">
<!--?xml version='1.0' encoding='UTF-8'?-->
<!-- This file was generated by dvisvgm 3.4.3 -->
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="401.775pt" height="138.105pt" viewbox="0 0 267.85 92.07">
<style type="text/css">
@font-face{font-family:TUELZZ-LMRoman10-Regular;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAAOcAAoAAAAABjQAAANTAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAATAqFCIQLCwwAATYCJAMUBCAFgxgHIBv8BECO0xVzFGEkFy4RFGNt794U0fYJUWvioVBJDJUUaKREoyRI+X/+vddzkwpMYSWp4YnOyyB+tdumP/f8bmANlCAwiqQBJiUm2G6AExvNKlFGXED4BeTrNo8eA4lRqEM6fIpoh0LcRUPATX5h1/9JweBQ0GdlgEXwA7wMEbR7fa/IBB4Pioot/1gALUD6LL3/vzESBaxhuLATl22griqlB6nSFfET1tX/O/4v/l/4PwYIYCVifWvuL0C0BBR/AISQ8tRAXUhFNPXePZLDMXAdkxlTRDPak9JTzMFxZoplUTOx5YgOfYWjwbKRDKPvMSk9KQfTMhOyM+YLxBn63D21eWaDYpjUcaMprWMkh0OzbGQv05uzPKAysVV3C2f4gOMxknGSPm6znn2ZFJQeT502GpPitjMMOT6mIzTFLGy+vjFuI3uU1LCRntWYUdjjvcG2/yEovHePvHBHBubW+wD9iM5vVMEXt3iiSJhlrxiG5HC8e+7NQ9O49GnBi+y/40C/VcfgHpA4V+NXWPxc/7o+lB4ISlFb1iVIFrkhb9re8kPsWYtO9X2+6aIooqCIRh7IzzjSvjHllv51gx+n+ZX1z50aTcB3+wXyCFv5rLSouotSRbCpmj9nWDQ6HI9Fdc1YKkqu7krGnOLtJIldZ2cFTF499BZs2n31H6vGy697flh+ca0r68UvXGQGm6rhce/RmlA8BrU0Y5kopbI1BkvAoioguD0Byk0+ilbakDSynflW9BZKca0W2ketK3q1Z767jDcTpP/wtJameDTy23k/fBFTK8WKMTWxL/BM7K6p6oig50tPYjkaVTWHpmJRgSXDep4GGa9FHXeccFmiSgAgEHz80I8SRR3/8BW4AKf6dpgMxgCoShCUa43cAWXKKVNgeqjGTeu4CJozr8yNIpSc5smBW/cJxUENCrdoHL9FljT0yLJxRtN1kzzhosgPYVCCRRYtKyJLRi2RZcsOeOvWvQ0MekoZNzMlKa/AmBhjj2j8DRl34ihnRpBSV8r3llaRXVqRma9mQVgSFhAoSLhC+ZIVMGOKRPESKEYMY/mijYVLl6lcnmQlaOlKlMpWqIAaM0Qe4MMX5GInK5MuzUhRvbLTVMhWamTK95gWCJZa3QIO) format('woff2');}
@font-face{font-family:XDTRFF-CMR7;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAAIgAAoAAAAAA+wAAAHVAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAANAqBJIEpCwYAATYCJAMIBCAFglwHIBs6AwCOwrZtE8eJxRA/tcQ3HqJj35vZ+P+iihs8UuTAzlPwwGQP1/TSFHlAxJolEGiWBfbTPzm7t9zxwYMW0G9hAPCWRFIat0QizsOkAss0wcA425mqZ5KyW2OM2W8TSp6hNWjkP0XxL7XqHhFmQFCwUB0d2D4+R9uA7qqtwACKwA0HCZAoWNeddVTHQFUFrgaZVaRGh99LUJG4Bp4AqIDckw/tFG/rvdXFxsJbo63Rbrdsz+RnKvs2+Lwbyl9MZUcmZCrdNbJf9f7b+pIDmweDIFXOzO6wLdX69uI+bPtjUzrBzJbLmVldduW6wPhe/FYZsOxsMfe74f1SlDyPeyLwirSISPbzEmZ7WV5Su9G1xw4/KwAAAsHrn55XJ4j+Y+IKAIBBpJhyDkwlCIoB5D0ECUkxIABAJiJFSNezCyHM+oIYS1JzNWcJjXbRcSEy2uUPizojHMokrja1o9EsOm3FWXcuD6R8t7lXnlxcmJrqk5RTGHbNrQN8/Ueyp8szzaMdQ6NtPfZBvsG+QZCkT49+I4a1GGQvR59mWu9VLlmxQqlS+UiSo1CYUsQtQzr06WUvgC9/PNJcb0fXsAqa36HRBHvNRnUYMqpND3tBfAXzFQQD7D8AAA==) format('woff2');}
@font-face{font-family:NQUDBD-CMR10;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAAIUAAoAAAAAA/AAAAHLAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAANAqBIIEnCwYAATYCJAMGBCAFgmIHIBs8AwCOkVuMqKp4lhfx8fD84e/c+95fq7Wpj02hhANaEzgOOJOEAkp7V2u6Hy6BRbwQKob7VAUIVNHXxhY1oDF1T7K6U7MdT2QD+rvuJgFANomogBOMNA8nXWCxjoz6polTFCGHlPbtQEnxSUh+5c//shup8c8JZUzAXSTIXd/2CyByulagoYg8tzWQKFijmzUCR0BVBU5bs/729gMEgAQViRPgCoAKyM2twi0loyjNO2N+ZS5YJcuqv2j8Qp9+sDGWJO9WGWb7Sbf8HaUwvl2hacYxPXvX27Kn5bfJ+NHx39z502yvu25LqX43ssc7jvHckLuW2XQzjpkkrw259cqC0y17jeBwbAFPYCIHld2zOaddCQCB4OaZfEvMmf76pQIAoP3yIL+BvgRB0ZAs7QeHAABEwhKBdIIHqmHooxNmqKuxmUDHyC66xo79oR0KfFEHwgGvj2pLGR0bLtG1ZdyGLj0vY/lq89Yfwlaz9cTiC8tlN+4kR7LQ8HD5JtsvdfqF2roSqZASLBpqmnq6ctrW+TRkIXp1fiGYlZnVCQufMDkZUk5bR0lD3To5RFZBDqtXWaoTZeOQNrIuq6+ko6+gZp0SooIo8QGmAA==) format('woff2');}
@font-face{font-family:OYFEXR-CMMI10;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAARIAAoAAAAABsgAAAP/AAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAARAqGVIUYCwwAATYCJAMUBCAFgmgHIBtRBVGUK04O8SMxNqbVPGshopVB2XPxPd0P71m9pFSaAsyAzDRd2MWaKHZP+jr/uQTh7fabjBZJGngYBhqWJVQaBJ56WgE4dDO+ojl4TADPtkaBdFHaFsoTCcc/jW2PTy/6/OT25q7tQamlK8uND4WHO4AWLR3AAOiFvvofs6YmyGsOyE4VyEygRMGzMHSbPgKYpubHNBkANAiAggKWyXAAKKQBwFgqhi54iI0NBTDVrPw4k3GQmXOZVZnl/5ZBwGdowHXKSAeQCUDS+Uj6JNrPp2kKSPqElRvBcShNbZFvkUe8W503ay6/12/W9OEe3LFFzqN2HJEfUmlJ3pHIRnwEadwKpx7x///w5JsguFV5k7z8Wr3RebJm+Wv9jjOOFYciR62b5LYrHwzpNLL7uvVwgtyI45vxaPYOzx3qSJLY8SH/yDPd1quXjyPRE47DuP2hFzs5IpxIkJffR2/YthxSbb1q3/ZIceWN50zacLPmYioUTVM7DNsPY4ffkhs3cvHNmwM7PGfqL92CrcoEbD2X+yStoCjLCdsKFfRQqVToALVDc8GxCduE3U1AJNmTpvZ40tSjJCTIo84EuRwnd2JbD+LLD+NUmtqiSFPR+3WJBElqN/Leb2v25aqkxB/rGvJNLe1rY6Wc3R9HjXuw1szB59cZe9/n//jNIPv+ZTeCZ9UDzct739f+9Dv05JhXPMwRa7bEOgvUbTzBwEo29vbA76sraW/H71KdPiuzrpVwvpnIX+O+afnrD5PYdUc7Sj0ZVzfBvo58bbtm78BKJvZuv3hBJW1ipa4iHjp/9z+7sHigVYDd6WZ/S8jCjU3wx6LBi/HwommdyO9nW9qCkVNM7ZjBP+vvBqcUfdS0LDl59vemPKTarBmqb//KweIM3DtSXufpYQ0kRIZjiv+nDHxjEc15nR2v5R/otJRU+31Xsc6UXKxxc+HUqdwTXbK+I6DBoKs9fvnvqncK8Y5P9oiqgGzrEtviARlj/yweevejRYrbytClIdT3MdUwEcUf1brh0sisCk5xO/+cGO0VV7fV16Ldjq+IWmTMfOUQXuVcmQgAACAAEPDXXWLFAFHJx6YVqGSMsaMxgAWfAyBg03wFvUEB0B0QYCAWkRUUMYI+/fRkP5uYMfQaaACQaz6EAEQoAukERK7JwKM1mQQcp7nUctAgpULotYlJpzbWZMAtNpnUdhZcOS4fzbyf1/a396qrDXf5qltbG4nglWdM+INdnYfs9wydPmrK9BHjjNn+HH82VJtgnImmmWqYyYxaTTBUXxuvXS91aoV18anWqlUjQlCI9KtTjDLBeEYEv2AIqPfHh/mDJgND08FmNdxDTTfKlKURxjHK5peTp2ejAQ==) format('woff2');}

</style>
<g id="page1">
<path d="M.19694 48.952H83.24484" stroke="#000" fill="none" stroke-width=".3985" stroke-miterlimit="10"></path>
<path d="M85.23736 48.952L82.04933 47.35799L83.24484 48.952L82.04933 50.54601"></path>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="140.761255" y="-23.040985" transform="matrix(1.000261 0 0 1.000261 -52.041 81.647)">t</text>
<path d="M43.91268 48.952C43.91268 48.29174 43.37742 47.75647 42.71714 47.75647C42.05688 47.75647 41.52161 48.29174 41.52161 48.952S42.05688 50.14753 42.71714 50.14753C43.37742 50.14753 43.91268 49.61226 43.91268 48.952Z"></path>
<text font-family="NQUDBD-CMR10" font-size="9.96" x="140.761255" y="-23.040985" transform="matrix(1.000261 0 0 1.000261 -100.57201 84.928)">0</text>
<path d="M72.25948 48.952C72.25948 48.29174 71.72422 47.75647 71.06396 47.75647S69.86843 48.29174 69.86843 48.952S70.4037 50.14753 71.06396 50.14753S72.25948 49.61226 72.25948 48.952Z"></path>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="140.761255" y="-23.040985" transform="matrix(1.000261 0 0 1.000261 -73.768009 84.636)">t</text>
<text font-family="XDTRFF-CMR7" font-size="6.97" x="144.31632" y="-21.540256" transform="matrix(1.000545 0 0 1.000545 -73.768009 84.636)">0</text>
<path d="M115.5767 48.952H141.931" stroke="#000" fill="none" stroke-width=".3985" stroke-miterlimit="10"></path>
<path d="M113.584189 48.952L116.772219 50.54601L115.576709 48.952L116.772219 47.35799"></path>
<text font-family="TUELZZ-LMRoman10-Regular" font-size="9.96" x="140.761255" y="-23.040985" transform="matrix(1.000261 0 0 1.000261 -27.092003 66.542)">Spec</text>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="162.340622" y="-23.040985" transform="matrix(1.000261 0 0 1.000261 -27.092003 66.542)">φ</text>
<path d="M170.2778 48.952H253.32568" stroke="#000" fill="none" stroke-width=".3985" stroke-miterlimit="10"></path>
<path d="M255.31821 48.952L252.13018 47.35799L253.32569 48.952L252.13018 50.54601"></path>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="140.761255" y="-23.040985" transform="matrix(1.000261 0 0 1.000261 118.04 79.808)">x</text>
<path d="M212.798 91.4722V8.42432" stroke="#000" fill="none" stroke-width=".3985" stroke-miterlimit="10"></path>
<path d="M212.798 6.4318L211.20399 9.61983L212.798 8.42432L214.39201 9.61983"></path>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="140.761255" y="-23.040985" transform="matrix(1.000261 0 0 1.000261 63.238 30.654999)">y</text>
<path d="M212.798 91.4722V6.4318" stroke="#00f" fill="none" stroke-width="1.19553" stroke-miterlimit="10" stroke-dasharray="2.98883 2.98883"></path>
<path d="M241.1448 91.4722V6.4318" stroke="#00f" fill="none" stroke-width="1.19553" stroke-miterlimit="10" stroke-dasharray="2.98883 2.98883"></path>
<path d="M242.53958 48.952C242.53958 48.18169 241.91511 47.55722 241.1448 47.55722S239.75003 48.18169 239.75003 48.952S240.37449 50.34678 241.1448 50.34678S242.53958 49.72231 242.53958 48.952Z" fill="#00f"></path>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="140.761255" y="-23.040985" transform="matrix(1.000261 0 0 1.000261 103.867008 66.985)">t</text>
<text font-family="XDTRFF-CMR7" font-size="6.97" x="144.31632" y="-21.540256" transform="matrix(1.000545 0 0 1.000545 103.867008 66.985)">0</text>
</g>
</svg>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-spanrank-geo-xy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: <span class="math inline">\(\operatorname{Spec}\varphi\)</span> and its fibers
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exm-flat-char-ag-inj" class="theorem example">
<p><span class="theorem-title"><strong>Example 5 (A non-flat parametrization)</strong></span> Let <span class="math inline">\(k\)</span> be a field and <span class="math inline">\(A = k[x,y] / (x^3-y^2)\)</span>, <span class="math inline">\(B=k[t]\)</span>. Define an <span class="math inline">\(A\)</span>-module structure on <span class="math inline">\(B\)</span> via the homomorphism <span class="math inline">\(\varphi: A \to B\)</span>, <span class="math inline">\((x,y) \mapsto (t^2, t^3)\)</span>. <span class="math inline">\(B\)</span> is generated by <span class="math inline">\(1\)</span>, <span class="math inline">\(t\)</span> as an <span class="math inline">\(A\)</span>-module, hence <span class="math inline">\(\operatorname{spanrank}_A B = 2\)</span>.</p>
<p>Geometrically, this corresponds to the fact that the parametrized curve <span class="math inline">\(\operatorname{Spec}\varphi : t \mapsto (t^2, t^3)\)</span> has a cusp at the origin.</p>
<p>Pick the maximal ideal <span class="math inline">\(\mathfrak m := (x,y)\)</span> of <span class="math inline">\(A\)</span>, then the fiber over <span class="math inline">\(\mathfrak m\)</span> corresponds to the <span class="math inline">\(A\)</span>-algebra <span class="math display">\[
k(\mathfrak m) \otimes_A B \cong k[x,y] / (x, y) \otimes_{A} k[t] \cong k[t] / (t^2, t^3) \cong k[t] / (t^2)
\]</span> which has <span class="math inline">\(k\)</span>-dimension <span class="math inline">\(2\)</span>. On the other hand, for the maximal ideal <span class="math inline">\(\mathfrak m := (x - 1, y - 1)\)</span> of <span class="math inline">\(A\)</span>, the fiber over <span class="math inline">\(\mathfrak m\)</span> corresponds to the <span class="math inline">\(A\)</span>-algebra <span class="math display">\[
k(\mathfrak m) \otimes_A B \cong k[x,y] / (x - 1, y - 1) \otimes_{A} k[t] \cong k[t] / (t^2 - 1, t^3 - 1) \cong k
\]</span> which has <span class="math inline">\(k\)</span>-dimension <span class="math inline">\(1\)</span>. Hence, varies over different maximal ideals of <span class="math inline">\(A\)</span>.</p>
<p>Note that <span class="math inline">\(B\)</span> is not a flat <span class="math inline">\(A\)</span>-module. This is because, if we pick <span class="math inline">\(\mathfrak m := (x,y)\)</span> an ideal of <span class="math inline">\(A\)</span>, then <span class="math inline">\(x \cdot t = y \cdot 1_B\)</span> becomes a nontrivial <span class="math inline">\(\mathfrak m\)</span>-relation in <span class="math inline">\(B\)</span>, i.e.&nbsp;<span class="math inline">\(x \otimes_A t - y \otimes_A 1_B\)</span> is a nonzero element in the kernel of the multiplication map <span class="math inline">\(\mathfrak m \otimes_A B \to B\)</span>. Geometrically, picking <span class="math inline">\(\mathfrak m = (x,y)\)</span> corresponds to looking at the fibers of this map around the origin. [TODO] Understand this thoroughly.</p>
<div id="fig-flat-char-ag-inj" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-flat-char-ag-inj-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="tikz">
<!--?xml version='1.0' encoding='UTF-8'?-->
<!-- This file was generated by dvisvgm 3.4.3 -->
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="353.685pt" height="156.75pt" viewbox="0 0 235.79 104.5">
<style type="text/css">
@font-face{font-family:XDTRFF-CMR7;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAAK0AAoAAAAABJQAAAJpAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAANAqCSIIlCwgAATYCJAMKBCAFglwHIBu4AyAeA+6oIq54K18/pYi4WilHO3j636/dmS+7i5gkMWliXyJmoVs2DRVChNBNIqFs41B5w697390gV70Pa6KrmORmhHKoW0gQEe5uv4wSKmpLMMAyS7P+7yb/G6AX0CQNadrW9vMFfmKhHLYBM22TalDbVL4xQjC6apWGVmClQU5xoFcf/7NMjFjiXUOLxIC5kASfYuW0VwBXzTAsDLAINmgMAAUWyGqm9M7KANggXgsaN5uQnwk8KwF3WMEqwCkAYOuHIqT2NKR6R92EZeyT31/BCdZ4fJi1eJZw+VBCfof4p499jKdepYanYQvrhRWeG3KTzTl9rdkn5eurdQurfS4e3Kl6qVgnDz7LVzEP/yzHPjziK1i5PLjLXzpovcY7jsmQ+LLvS843E7NX/39/X0VHJueNiNVPHC3yfL0KMidns4F2VxeipYxvaJ6ovar91NEp0+gX7S39ZIAwnzsdILGh1voeTZA0AR0cg9I3L+wuG4ZdDdJW3KA7apuMBopliU0NzCnzQab2m7bRAkY81aRGNXxEucyIqor2f5/VobnYph0AAAGCvZP69YJU4V/UsgmtiSdFb6mjFJtexGKADjjwNAVhORpAJMMBAZYejAqnKsEOAKnuVLYlSgWHFoBLq4cTFEDFiZQYogS9ybYcKsGh/eDS2S5BK3vVgPvZlyhTmWpXq1MUJjunxu7TIHWBezfdp7S9qqW9oi6eAZmQARQa1GnUplWZZvGYNCj17fUyKaWyU1NLQcHEjkO6jtKiSoN68dCAUHHQePUHekWXQGlSrCvRl2pXpeWFCnXiYQBhAmHgJIwEAAA=) format('woff2');}
@font-face{font-family:TUELZZ-LMRoman10-Regular;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAAOcAAoAAAAABjQAAANTAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAATAqFCIQLCwwAATYCJAMUBCAFgxgHIBv8BECO0xVzFGEkFy4RFGNt794U0fYJUWvioVBJDJUUaKREoyRI+X/+vddzkwpMYSWp4YnOyyB+tdumP/f8bmANlCAwiqQBJiUm2G6AExvNKlFGXED4BeTrNo8eA4lRqEM6fIpoh0LcRUPATX5h1/9JweBQ0GdlgEXwA7wMEbR7fa/IBB4Pioot/1gALUD6LL3/vzESBaxhuLATl22griqlB6nSFfET1tX/O/4v/l/4PwYIYCVifWvuL0C0BBR/AISQ8tRAXUhFNPXePZLDMXAdkxlTRDPak9JTzMFxZoplUTOx5YgOfYWjwbKRDKPvMSk9KQfTMhOyM+YLxBn63D21eWaDYpjUcaMprWMkh0OzbGQv05uzPKAysVV3C2f4gOMxknGSPm6znn2ZFJQeT502GpPitjMMOT6mIzTFLGy+vjFuI3uU1LCRntWYUdjjvcG2/yEovHePvHBHBubW+wD9iM5vVMEXt3iiSJhlrxiG5HC8e+7NQ9O49GnBi+y/40C/VcfgHpA4V+NXWPxc/7o+lB4ISlFb1iVIFrkhb9re8kPsWYtO9X2+6aIooqCIRh7IzzjSvjHllv51gx+n+ZX1z50aTcB3+wXyCFv5rLSouotSRbCpmj9nWDQ6HI9Fdc1YKkqu7krGnOLtJIldZ2cFTF499BZs2n31H6vGy697flh+ca0r68UvXGQGm6rhce/RmlA8BrU0Y5kopbI1BkvAoioguD0Byk0+ilbakDSynflW9BZKca0W2ketK3q1Z767jDcTpP/wtJameDTy23k/fBFTK8WKMTWxL/BM7K6p6oig50tPYjkaVTWHpmJRgSXDep4GGa9FHXeccFmiSgAgEHz80I8SRR3/8BW4AKf6dpgMxgCoShCUa43cAWXKKVNgeqjGTeu4CJozr8yNIpSc5smBW/cJxUENCrdoHL9FljT0yLJxRtN1kzzhosgPYVCCRRYtKyJLRi2RZcsOeOvWvQ0MekoZNzMlKa/AmBhjj2j8DRl34ihnRpBSV8r3llaRXVqRma9mQVgSFhAoSLhC+ZIVMGOKRPESKEYMY/mijYVLl6lcnmQlaOlKlMpWqIAaM0Qe4MMX5GInK5MuzUhRvbLTVMhWamTK95gWCJZa3QIO) format('woff2');}
@font-face{font-family:NQUDBD-CMR10;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAALwAAoAAAAABRQAAAKnAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAARAqDJIJlCwwAATYCJAMUBCAFgmIHIBsYBFFUTOIwPxMyuTp2s6hVG63cUibDj+wJb+bD25XvL6iTZg/0zEmzF5El3IEVVIGDpLuUcZWKRODt9htoVCCWcBbFFiYQf+E11/H0/N+M/8uyNtAEiX0uDcMN1haKsOfhuklnB3LE4/kkgrN5sXnGbpOUPPo0D3tAGg05DDlIHsl/NodGQL4RBzlDDZAKoAjcFdhz5SwoJCub+A+kiNHs/wJAApACbO0SGxkKoKIiAaSglLUgeTnWtwsBWO4/1QAUgFWAOwAAQAYAAIKQkPRdLqdLp5vYvFdgBCFOEPtEcZ/NxnE095F2n5jiuV6O20ucoshsEZjUk85T+3ia52ed5SiOy78lVN8Qtog5oph3l6ev8/23xT6RYc4FBCH+UqHtXi9H02f9PL/McF/actluPHVx84Xe/krdvzSOyQlqNLnPe1WHKu+ZhF5qMsY6tA9Gxht+e8BOooaMTs3EIanqc+y618MTTX/I9rPdP1tazXFEbXdywxAadIblK+LqJ6Nnx0fT0r8YN682rFgeqpvInQmz6QkNp40+bKfqCvUN+nHJUsS2eebGZupGD93dZ6bVNIlh3r7J2Fifg/vtU9cYP3Nm+ky9v17zjIsScm3qoQ08AgEQ+Nz5fNmYsfRXSWVA6b98UgCxywEC8RcekiTnE4hGIBG5wE5xUYAk03oxApDLctODXGMjogZGiOQyOkaBltPy0go6ifMaHtmkyFKDCGgttIzLXFrOYSut4HK60Mh1LctQPhGbbO+ia6trM2rauqNU8j6IZlL7rRfZ67Ar5yxbOWtBKCczNzMHNRZZYLEVlotZKqTNImz99RZq14VWq1qtDDXadIuiMGKWWmaORRYKicpEmYMGe+ERe+IawIaT1jA+a6U5lj3xWRYIyZEpV6YcUgA=) format('woff2');}
@font-face{font-family:OYFEXR-CMMI10;src:url(data:application/x-font-woff2;base64,d09GMgABAAAAAARwAAoAAAAABygAAAQnAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAATAqHJIVLCw4AATYCJAMYBCAFgmgHIBuQBSCOxHR7g2wTjjJv+gFP+5eMStNR6JaeByI9cpTurrgPszz0O//dBRz1XhZQxCUwnNlgU6fyJzQHjwmgubdMy0VgLJBchIKwO6YVS1Yultyq7WoPSkkrl42XwsMdwBNfIE+BD6AfevI/Bk9agnxbHWARQgAyP1AYAM9C/FuYBPwMa5cHuAB4IAAKChiXywGgOQ8ATKVieNkeEiYIhTKUr6R2DV6IFH+Cy+I+5j741wUQ9PkRiOYusgCQB0jyCpH0dwPajS74m0gRTFdsvRuvpQ5xNBhYt3DvIGNIZ+cSXbYaSJ0eDlFHqaOQhvW6y56zr5RrFS4JdzfVUUSIpj5Kj5wiTaSPrMaTaKr1QI7scIg6EUoNkKb1ssu02VP5at1hz/unyk1jOg96yH7NGorW3GsVDgdpXdTsZdKqcbwWZ1g0GawRfSyzptc2fQdK9fOzgwhjSKcX1942xIaT6EwmbfYVY0mrrkeufl67YYc6d2YwxlFZ9pxmRzE4RJNKYy/We06rrhbGa2tNmgzGfGZWgKyXZUL9hNUeh0oQGkNaD+Qg8rLZUV1Ek8KUTg1Wg60zgWRFcog2Aw6xwwImrV+XSbuP05qx+m78fi9OcIg6KodgbHozmTSaYrXIGfAcjQumoSJq3zXoEYLSFsYYeWZ4Sn4CrxoCjKzkpM1+euZroxYY8vS6k1Drm5SMrafqQnilt+rFTdHPPozR7ry3ZDouH61+/+Km4uc/QuRWf7BtKalQdz3MVj5YRCzaTRA77/rxsRvPeWaL3Oi4jOZTKaEPs0Wf6C9r/PWTmqTemmKKfC4u7w8doTaKIQrt0W782MtOySo3nmw3JdcbUZPr/2mLO0RrimFrEYIfmcnQ/fzhp1uxt3H6rYIw5MfxwGBTcoRfMS32W+V10zz7NwqBd4bHf/S3RjzUFeKVQ97XERCKbk+meBtECkSbSagMUP/Piz7TkCg7tbjhJdoVpuHoYWw0j4WxKZIK+sIwMmI1FC5zOQl8p5LX4Ozf7i+pkk1vaZNytrTgcEmtGybpPztYX7zCQzoEO6OpvlGXdwnfbBSfkHuWKE2WuAo5SDz7ORsNcZ1v8PFCI3TeN/NC0ipl40TcymUkAAAAEAAIONl7JHdNwvE3weIFzHJVsxS9DgCCUCPcbxX0ByoQDOwQkHciA+iRC9T0A+X4HZSzFSwgSF2YbIC5sEqIAEjA0OQlRsLkI0LR5CdG57QweZZ4IE0IEMqCQ5OXvHSTD+62yU9ecyHM0uzJDn7cNh1ywduLHm7kERTkZ2Z6YxqbGZsO9d7B3xNfmJJXmJShamFsaWwBHrJkyFYgX4JcqoJkicdrmUJc4M0LXTgjHoIE8WPGVJToW/OkyJJJlRljphbg42fa/JjFQHwWq6TjjlcoRd4PT5JBlQVjloxZ4EE=) format('woff2');}

</style>
<g id="page1">
<path d="M.19757 55.118997H84.83948" stroke="#000" fill="none" stroke-width=".3985" stroke-miterlimit="10"></path>
<path d="M82.966498 52.727957C83.345088 54.162607 84.188748 54.840047 85.038738 55.118997C84.188748 55.397947 83.345088 56.075387 82.966498 57.510037" stroke="#000" fill="none" stroke-width=".3985" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="84.083051" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 4.653008 81.652)">t</text>
<path d="M15.56649 55.118997C15.56649 54.458737 15.03123 53.923467 14.37097 53.923467S13.17544 54.458737 13.17544 55.118997S13.71071 56.314527 14.37097 56.314527S15.56649 55.779257 15.56649 55.118997Z"></path>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="84.083051" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 -71.533 84.641)">t</text>
<path d="M43.91331 55.118997C43.91331 54.458737 43.37805 53.923467 42.71777 53.923467C42.05751 53.923467 41.52225 54.458737 41.52225 55.118997S42.05751 56.314527 42.71777 56.314527C43.37805 56.314527 43.91331 55.779257 43.91331 55.118997Z"></path>
<text font-family="NQUDBD-CMR10" font-size="9.96" x="84.083051" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 -43.87799 84.933)">0</text>
<path d="M105.08069 55.118997H133.02899" stroke="#000" fill="none" stroke-width=".3985" stroke-miterlimit="10"></path>
<path d="M131.156 52.727957C131.53459 54.162607 132.37825 54.840047 133.22824 55.118997C132.37825 55.397947 131.53459 56.075387 131.156 57.510037" stroke="#000" fill="none" stroke-width=".3985" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
<text font-family="TUELZZ-LMRoman10-Regular" font-size="9.96" x="84.083051" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 21.097008 66.547)">Spec</text>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="105.662417" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 21.097008 66.547)">φ</text>
<path d="M153.27017 55.118997H212.40011" stroke="#000" fill="none" stroke-width=".3985" stroke-miterlimit="10"></path>
<path d="M210.52713 52.727957C210.90572 54.162607 211.74938 54.840047 212.59937 55.118997C211.74938 55.397947 210.90572 56.075387 210.52713 57.510037" stroke="#000" fill="none" stroke-width=".3985" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="84.083051" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 125.84701 79.812999)">x</text>
<path d="M156.10501 89.135077V21.501427" stroke="#000" fill="none" stroke-width=".3985" stroke-miterlimit="10"></path>
<path d="M153.71397 23.374418C155.14862 22.995828 155.82606 22.152168 156.10501 21.302178C156.38396 22.152168 157.0614 22.995828 158.49605 23.374418" stroke="#000" fill="none" stroke-width=".3985" stroke-miterlimit="10" stroke-linejoin="round" stroke-linecap="round"></path>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="84.083051" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 63.238008 39.163999)">y</text>
<path d="M196.92403 104.101317C196.92403 104.101317 192.13519 95.711797 190.40483 92.848837S186.02574 85.834637 184.45267 83.467097C182.87959 81.099557 180.48297 77.704507 179.06714 75.785207C177.65131 73.865917 175.50677 71.152257 174.24823 69.634097C172.98968 68.115927 171.09758 66.007497 169.99638 64.843297C168.8952 63.679097 167.25549 62.100697 166.3116 61.243297C165.36771 60.385887 163.98009 59.261547 163.19342 58.663627C162.40677 58.065727 161.27124 57.319497 160.64188 56.933907C160.01253 56.548317 159.12947 56.104947 158.65739 55.884577C158.18533 55.664207 157.55432 55.447947 157.23955 55.345637C156.92477 55.243327 156.54613 55.178537 156.38873 55.147097C156.23134 55.115667 156.10516 55.126797 156.10501 55.118997S156.23033 55.122267 156.38743 55.090897C156.54455 55.059517 156.92297 54.994887 157.23738 54.892797C157.55179 54.790717 158.18181 54.575157 158.65351 54.355157C159.12521 54.135137 160.00807 53.692267 160.63713 53.307107C161.26617 52.921957 162.40109 52.176557 163.18738 51.579107C163.97366 50.981687 165.36071 49.858007 166.30424 49.001197S168.88686 46.567257 169.98773 45.403767C171.08862 44.240287 172.98053 42.132917 174.23871 40.615597C175.49689 39.098257 177.64041 36.386317 179.05591 34.467917C180.47139 32.549527 182.86778 29.155647 184.44057 26.789067C186.01335 24.422477 188.66141 20.273037 190.39141 17.411217C192.12144 14.549387 196.90933 6.163067 196.90933 6.163067" stroke="#000" fill="none" stroke-width=".79701" stroke-miterlimit="10"></path>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="84.083051" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 115.20501 28.317997)">y</text>
<text font-family="XDTRFF-CMR7" font-size="6.97" x="89.298315" y="-20.48883" transform="matrix(1.000545 0 0 1.000545 115.20501 28.317997)">2</text>
<text font-family="NQUDBD-CMR10" font-size="9.96" x="96.557794" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 115.20501 28.317997)">=</text>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="107.07105" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 115.20501 28.317997)">x</text>
<text font-family="XDTRFF-CMR7" font-size="6.97" x="112.731539" y="-20.48883" transform="matrix(1.000545 0 0 1.000545 115.20501 28.317997)">3</text>
<path d="M185.84659 83.465797C185.84659 82.695487 185.22212 82.071027 184.45181 82.071027S183.05704 82.695487 183.05704 83.465797S183.6815 84.860577 184.45181 84.860577S185.84659 84.236107 185.84659 83.465797Z"></path>
<text font-family="NQUDBD-CMR10" font-size="9.96" x="84.083051" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 103.867008 94.34)">(</text>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="87.956047" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 103.867008 94.34)">t</text>
<text font-family="XDTRFF-CMR7" font-size="6.97" x="91.5271" y="-20.48883" transform="matrix(1.000545 0 0 1.000545 103.867008 94.34)">2</text>
<text font-family="OYFEXR-CMMI10" font-size="9.96" x="96.020943" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 103.867008 94.34)">,<tspan x="100.433222">t</tspan></text>
<text font-family="XDTRFF-CMR7" font-size="6.97" x="104.014302" y="-20.48883" transform="matrix(1.000545 0 0 1.000545 103.867008 94.34)">3</text>
<text font-family="NQUDBD-CMR10" font-size="9.96" x="108.512683" y="-16.880593" transform="matrix(1.000261 0 0 1.000261 103.867008 94.34)">)</text>
</g>
</svg>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-flat-char-ag-inj-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: <span class="math inline">\(\operatorname{Spec}\varphi\)</span>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
<p>From the above examples, one might notice that this irregularity is mostly constituted from the choice of residue fields, i.e.&nbsp;the choice of fibers over different maximal ideals. Luckily, it turns out that this is almost the only obstruction. Once we restrict ourselves to a local ring, the world becomes much nicer:</p>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="prp-spanrank-eq-residue-dim-of-local-of-fg" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 3</strong></span> Let <span class="math inline">\((R, \mathfrak m)\)</span> be a local ring with residue field <span class="math inline">\(k = R/\mathfrak m\)</span>. For any finitely generated <span class="math inline">\(R\)</span>-module <span class="math inline">\(M\)</span>, we have <span class="math inline">\(\operatorname{spanrank}_R M = \dim_k (k \otimes_R M)\)</span>.</p>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Proof
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="proof">
<p><span class="proof-title"><em>Proof</em>. </span>Lifting the exact sequence <span class="math display">\[
k^{\oplus m} \longrightarrow k \otimes_R M \longrightarrow 0
\]</span> to <span class="math display">\[
R^{\oplus m} \longrightarrow M \longrightarrow 0
\]</span> is a direct consequence of Nakayama’s lemma. cf. <span class="citation" data-cites="AM1969"><a href="#ref-AM1969" role="doc-biblioref">[1, theorem 2.8]</a></span> for example.</p>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remark (Necessity of finite generation)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<div class="proof remark">
<p><span class="proof-title"><em>Remark</em> (Necessity of finite generation). </span>At most of the time, we work in Noetherian rings, hence the finitely generated condition is rather mild.</p>
<p>Nevertheless, it is indeed necessary. Consider the following example:</p>
<p>Let <span class="math inline">\(M = k[[x]]\)</span> be the formal power series ring over a field <span class="math inline">\(k\)</span>, regarded as a module over <span class="math inline">\(R = k[x]\)</span>. Then as <span class="math inline">\(k[x]\)</span>-modules, <span class="math display">\[
k[x] / (x) \otimes_{k[x]} k[[x]] \cong k[[x]] / x k[[x]]
\]</span> has dimension <span class="math inline">\(1\)</span> over <span class="math inline">\(k\)</span>, while <span class="math inline">\(\operatorname{spanrank}_{k[x]} k[[x]]\)</span> is infinite.</p>
<p>Localizing <span class="math inline">\(R = k[x]\)</span> at the maximal ideal <span class="math inline">\((x)\)</span> does not change any statements above, providing an counterexample over a local ring.</p>
</div>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="exr-various" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 1</strong></span> Here are some exercises:</p>
<ul>
<li><p>What can we say about the module <span class="math inline">\(M\)</span> given that <span class="math inline">\(\operatorname{rank}_R M = \operatorname{spanrank}_R M\)</span>?</p></li>
<li><p>Show that the <span class="math inline">\(\mathbb Z\)</span>-module <span class="math inline">\(\mathbb Q\)</span> is a counterexample of the following statement:</p>
<p>Let <span class="math inline">\(M\)</span> be a flat <span class="math inline">\(R\)</span>-module. Is it true that for any maximal ideal <span class="math inline">\(\mathfrak m\)</span> of <span class="math inline">\(R\)</span> with residue field <span class="math inline">\(k = R/\mathfrak m\)</span>, we have <span class="math inline">\(\operatorname{spanrank}_R M = \dim_k (k \otimes_R M)\)</span>?</p></li>
</ul>
</div>
</div>
</div>
</div>
<p>We close our discussion with some well-known properties of homomorphisms between finitely generated free modules:</p>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<div id="prp-various" class="theorem proposition">
<p><span class="theorem-title"><strong>Proposition 4</strong></span> Let <span class="math inline">\(R\)</span> be a ring, then:</p>
<ol type="1">
<li><p>Any <span class="math inline">\(R^{\oplus n} \to R^{\oplus n}\)</span> epimorphism <span class="math inline">\(\varphi\)</span> must be an isomorphism. <span class="citation" data-cites="AM1969"><a href="#ref-AM1969" role="doc-biblioref">[1, exercise 3.15]</a></span></p></li>
<li><p>An <span class="math inline">\(R^{\oplus n} \to R^{\oplus n}\)</span> monomorphism <span class="math inline">\(\varphi\)</span> may not be an isomorphism in general.</p>
<p>Is it true when <span class="math inline">\(R\)</span> is a local ring? [TODO]</p></li>
<li><p>An <span class="math inline">\(R^{\oplus n} \to R^{\oplus m}\)</span> epimorphism <span class="math inline">\(\varphi\)</span> implies <span class="math inline">\(n \geq m\)</span>. <span class="citation" data-cites="AM1969"><a href="#ref-AM1969" role="doc-biblioref">[1, exercise 2.11]</a></span></p></li>
<li><p>An <span class="math inline">\(R^{\oplus n} \to R^{\oplus m}\)</span> isomorphism <span class="math inline">\(\varphi\)</span> implies <span class="math inline">\(n = m\)</span>. <span class="citation" data-cites="AM1969"><a href="#ref-AM1969" role="doc-biblioref">[1, exercise 2.11]</a></span></p></li>
<li><p>An <span class="math inline">\(R^{\oplus n} \to R^{\oplus m}\)</span> monomorphism <span class="math inline">\(\varphi\)</span>? [TODO] <span class="citation" data-cites="AM1969"><a href="#ref-AM1969" role="doc-biblioref">[1, exercise 2.11]</a></span></p>
<p>It is at least true for <span class="math inline">\(R\)</span> an integral domain.</p></li>
</ol>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Proof
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="proof">
<p><span class="proof-title"><em>Proof</em>. </span></p>
<ol type="1">
<li><p>Obtain a split monomorphism (a right inverse of <span class="math inline">\(\varphi\)</span>) from the fact that <span class="math inline">\(R^{\oplus n}\)</span> is projective. Use the determinant to conclude.</p>
<p>[TODO] There is also a proof using residue fields and Nakayama’s lemma. See <span class="citation" data-cites="AM1969"><a href="#ref-AM1969" role="doc-biblioref">[1, exercise 3.15]</a></span>.</p></li>
<li><p>Consider <span class="math inline">\(\varphi: \mathbb Z \to \mathbb Z\)</span>, <span class="math inline">\(z \mapsto 2z\)</span>.</p></li>
<li><p>Tensor with any residue field of <span class="math inline">\(R\)</span>. Right side is still exact, hence a vector space epimorphism.</p></li>
<li><p>Do the same as (3) again with the inverse map.</p></li>
<li><p>When <span class="math inline">\(R\)</span> is an integral domain, tensoring with the field of fractions of <span class="math inline">\(R\)</span> does not destroy the injectivity, hence (5) holds in this case.</p></li>
</ol>
</div>
</div>
</div>
</div>




<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-AM1969" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">M. F. Atiyah and I. G. Macdonald, <em>Introduction to commutative algebra</em>. Addison-Wesley Publishing Company, Inc., 1969.</div>
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/blog\.sun123zxy\.top");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<input type="hidden" id="giscus-base-theme" value="dark_dimmed">
<input type="hidden" id="giscus-alt-theme" value="light">
<script>
  function loadGiscus() {
    // Function to get the theme based on body class
    const getTheme = () => {
      let baseTheme = document.getElementById('giscus-base-theme').value;
      let altTheme = document.getElementById('giscus-alt-theme').value;
      if (authorPrefersDark) {
          [baseTheme, altTheme] = [altTheme, baseTheme];
      }
      return document.body.classList.contains('quarto-dark') ? altTheme : baseTheme;
    };
    const script = document.createElement("script");
    script.src = "https://giscus.app/client.js";
    script.async = true;
    script.dataset.repo = "sun123zxy/blog-quarto-code";
    script.dataset.repoId = "R_kgDOIrPs5w";
    script.dataset.category = "General";
    script.dataset.categoryId = "DIC_kwDOIrPs584CV4gd";
    script.dataset.mapping = "title";
    script.dataset.reactionsEnabled = "1";
    script.dataset.emitMetadata = "0";
    script.dataset.inputPosition = "top";
    script.dataset.theme = getTheme();
    script.dataset.lang = "en";
    script.crossOrigin = "anonymous";
    // Append the script to the desired div instead of at the end of the body
    document.getElementById("quarto-content").appendChild(script);
  }
  loadGiscus();
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Proudly powered by <a href="https://quarto.org/">Quarto</a></p>
</div>   
    <div class="nav-footer-center">
<p>sun123zxy’s blog</p>
</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../thanks.html">
<p>Thanks</p>
</a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>