---
title: 代数批如何理解 Einstein 求和约定
subtitle: Einstein summation convention for confused algebraists
author: sun123zxy
date: 2025/10/29
lang: zh
# bibliography: index.bib

number-sections: true

categories:
  - math
  - algebra
  - geometry
  - physics
collection:
  - short

format:
  html: default
---

\renewcommand{\vec}{\boldsymbol}
\renewcommand{\rm}{\mathrm}

统一、自洽与简洁的记号体系是数批的床前明月光．大部分数学方向都已经发展出了一套相对完备的记号体系——但遗憾的是，有的方向的记号非常不巧地和其他学科的外来物种杂交在了一起，使得不同背景的使用者对同一记号的理解大相径庭．我们今天辨析的 Einstein 求和约定（Einstein summation convention）似乎就深受其害：物理学家们习惯于使用 Einstein 求和约定来简化张量矩阵运算中的求和符号，和物理学家纠缠不清的微分几何学家们也纷纷采用这一记号，并在教学时自豪的向学生介绍这一记号对求和的简化作用．一眼看上去，在 Einstein 求和约定下，你不再显式地写出求和符号和求和指标：每个乘法中左侧的下标和右侧的上标自动配对作为求和指标．例如，两个向量 $\vec a$ 和 $\vec b$ 的内积将被写作 $a_i b^i$．然而，大部分教学实践中仅仅将 Einstein 求和约定理解为一种“省略求和符号的记号简化”，忽视其背后的代数结构，并不能说服困惑的学生接受这一记号．纯坐标化的理解也往往掩盖了 Einstein 求和约定的内在含义——这是将抽象线性空间张量积和其在基底下的坐标矩阵运算联系起来的桥梁．

我们今天来捅破这层窗户纸．

## 坐标无关张量缩并

首先约定本文中出现的上标默认均不代表乘法幂．考虑一组维度分别为 $n_i$ 的域 $K$ 上的线性空间 $V^i$, 这里 $1 \leq i \leq m$．设他们分别有自然基底 $\left( \vec e_{\alpha_i} \right)_{1 \leq \alpha_i \leq n_i}$^[这里做记号滥用：我们通过 $\alpha_i$ 里面的 $i$ 来区分是哪个模的基底．]．此时，对任意向量 $\vec v \in V^i$，都有坐标表示^[野蛮的物理学家会直接去掉坐标表示的求和符号．]
$$
\vec v = \sum_{\alpha_i = 1}^{n_i} \vec e_{\alpha_i} v^{\alpha_i}
$$

接下来，我们考虑这些线性空间的对偶．对每个 $V^i$，记其对偶空间 $V_i := \left( V^i \right)^*$，其有自然对偶基底 $\left( \vec e^{\alpha_i} \right)_{1 \leq \alpha_i \leq n_i}$，满足
$$
\vec e^{\alpha_i} \left( \vec e_{\beta_i} \right) = \delta{^{\alpha_i}}{_{\beta_i}} = \begin{cases} 1 & \text{if } \alpha_i = \beta_i \\ 0 & \text{otherwise} \end{cases}
$$
后者是 Kronecker delta 符号．此时，对任意 $\vec v \in V_i$，都有坐标表示^[野蛮的物理学家会直接去掉坐标表示的求和符号．]
$$
\vec v = \sum_{\alpha_i = 1}^{n_i} v_{\alpha_i} \vec e^{\alpha_i}
$$

我们研究的对象是这些 $V^i$ 和 $V_i$ 的张量积．注意交换张量积顺序是一个自然同构，故我们总可以事先确定一个张量积的顺序——例如，按指标 $i$ 升序排列，$V_i$ 排在 $V^i$ 前．^[方便起见，以后书写张量积时的顺序有时会和上述顺序不符，实际上均理解为按上述约定顺序排列．] 设 $I,J \subset \{1,\dots,m\}$ 为指标集，可记 $V_I^J$ 为按如此顺序排列做张量积得到的线性空间．

:::{.remark}

回忆张量积泛性质
$$
\rm{Hom}(V, W^*) \cong (V \otimes W)^* \quad\text{or}\quad \rm{Hom}(V, W) \cong V^* \otimes W
$$
故有自然同构 $V_I^J \cong V_I \otimes V^J \cong \rm{Hom}(V^I, V^J)$，即 $V_I^J$ 中的张量也可理解为 $V^I \to V^J$ 的线性映射．
:::

考察 $V_I^J$ 的自然基底：
$$
\vec e_{\alpha_J}^{\alpha_I} := \left( \otimes_{i \in I} \vec e^{\alpha_i} \right) \otimes \left( \otimes_{j \in J} \vec e_{\alpha_j} \right) \in V_I^J
$$
其中 $\alpha_I := (\alpha_i)_{i \in I}$，$\alpha_J := (\alpha_j)_{j \in J}$．

:::{.remark}

实际操作时，通常将各个 $\alpha_i$ 用单个字母（例如 $i, j, k, l$）替换表示，此时用 $V^\rm i, V^\rm j, V^\rm k, V^\rm l$ 或 $V_{\rm i}, V_{\rm j}, V_{\rm k}, V_{\rm l}$ 区分不同的空间．如取 $I = \{\rm i,\rm k\}$, $J = \{\rm j,\rm l\}$，则有
$$
\vec e{^i}{_j}{^k}{_l} := \vec e^i \otimes \vec e_j \otimes \vec e^k \otimes \vec e_l \in V{_\rm i}{^\rm j}{_\rm k}{^\rm l}
$$
:::

现在来描述 Einstein 求和约定下 $V_I^J$ 中张量的记号：$\vec a_I^J \in V_I^J$．这种写法类似将多项式写成 $f(\rm x, \rm y) \in K[\rm x, \rm y]$：

- $\rm x, \rm y$ 明确了多项式（函数）$f$ 的自变量，而 $I,J$ 明确了张量 $\vec a$ 的协变和逆变空间 $V_J$, $V^I$．
- $f(\rm y, \rm x)$ 代表多项式 $f(\rm x, \rm y)$ 交换自变量顺序后得到的多项式，而 $\vec a_{I'}^{J'}$ 代表通过对偶同构 $V \cong V^*$ 将张量 $\vec a_I^J$ 放入 $V_{I'}^{J'}$ 中得到的张量．

需要注意的是，基底 $\vec e_{\alpha_J}^{\alpha_I}$ 和张量 $\vec a_I^J$ 的指标位置恰好相反——这一设计与张量的坐标表示密切相关：^[野蛮的物理学家还是会去掉坐标表示的求和符号．]
$$
\vec a_I^J = \sum_{\alpha_I, \alpha_J} a_{\alpha_I}^{\alpha_J} \vec e_{\alpha_J}^{\alpha_I}
$$
这里的 $a_{\alpha_I}^{\alpha_J}$ 是张量 $\vec a_I^J$ 在基底 $\vec e_{\alpha_J}^{\alpha_I}$ 下的坐标．

定义张量间的缩并运算（tensor contraction）：设 $\vec a_I^J \in V_I^J, \vec b_J^K \in V_J^K$，定义它们的乘积 $\vec c_I^K := \vec b_J^K \vec a_I^J \in V_I^K$ 为张量积后对 $J$ 指标进行自然配对得到的张量，即线性映射理解下的复合映射 $V_I \to V_J \to V_K$．当参与乘法的张量的指标 $J$ 左下右上不匹配时，定义它们的乘积为 $0$．

考察自然基底间的缩并．根据前述对偶基的关系，有
$$
\vec e_{\beta_J}^{\beta_K} \vec e_{\alpha_I}^{\alpha_J} = \begin{cases} \vec e_{\alpha_I}^{\beta_K} & \beta_{J} = \alpha_{J} \\ 0 & \text{otherwise} \end{cases}
$$
利用这一自然基底的缩并关系，我们考察一般张量间的缩并的分量形式：
$$
\vec c_I^K
= \left( \sum_{\alpha_J, \alpha_K} b_{\alpha_J}^{\alpha_K} \vec e_{\alpha_K}^{\alpha_J} \right) \left( \sum_{\alpha_I, \alpha_J} a_{\alpha_I}^{\alpha_J} \vec e_{\alpha_J}^{\alpha_I} \right)
= \sum_{\alpha_I, \alpha_K} \left( \sum_{\alpha_J} b_{\alpha_J}^{\alpha_K} a_{\alpha_I}^{\alpha_J} \right) \vec e_{\alpha_K}^{\alpha_I}
$$
这里的内层求和正是 Einstein 求和约定下省略的求和符号．写作分量形式即
$$
c_{\alpha_I}^{\alpha_K} = \sum_{\alpha_J} b_{\alpha_J}^{\alpha_K} a_{\alpha_I}^{\alpha_J}
$$
注意分量形式的缩并，形状上恰好可以看成张量形式缩并 $\vec c_I^K := \vec b_J^K \vec a_I^J$ 粗体还原并添加求和符号后的结果．这就是 Einstein 求和约定的核心观点：**不写求和号的记号事实上是 coordinate-free 的张量缩并写法，左下右上指标自动配对求和．**^[尽管前面直接扔掉坐标表示求和号的野蛮行径仍然无法使用此观点解释．]

:::{.remark}

实践中，例如 $I = \{\rm i\}, J = \{\rm j, \rm k\}$, $K = \{\rm l\}$，则有
$$
\vec c{_\rm i}{^\rm l} = \vec b{_\rm j}{^\rm l} \vec a{_\rm i}{^\rm j}
$$
对应的分量形式为
$$
c{_i}{^l} = \sum_{j} b{_j}{^l} a{_i}{^j}
$$
:::

:::{.remark}

张量形式的缩并被称为 [abstract index notation](https://en.wikipedia.org/wiki/Abstract_index_notation)，而分量形式的缩并被称为 [Ricci calculus / tensor index notation](https://en.wikipedia.org/wiki/Ricci_calculus)．二者是 [Einstein summation convention](https://en.wikipedia.org/wiki/Einstein_notation) 在数学这边的两种理解方式．
:::

## 使用例

【TODO】